/*
 *  Bootstrap Swapbox - v0.0.1
 *  An alternative to the HTML select-box.
 *  https://github.com/joshuairl/jquery-bootstrap-swapbox
 *
 *  Made by Joshua F. Rountree
 *  Under MIT License
 */
(function(){!function(a){var b,c,d;return d="swapbox",c={wrapCssClass:"",triggerCssClass:"",itemCssClass:"",listCssClass:"",itemPrepend:"<span>",itemAppend:"</span>",triggerPrepend:"<span>",triggerAppend:"</span>"},b=function(){function b(b,e){this.element=b,this.options=a.extend({},c,e),this._defaults=c,this._name=d,this.$el=a(this.element),this.init()}return b.prototype.init=function(){this.retrieveItems(),this.build()},b.prototype.build=function(){var a;a=this,this.buildWrap(),this.buildList(),this.buildItems(),this.buildTrigger()},b.prototype.buildWrap=function(){var b;b=this,this.$wrap=a("<div></div>"),this.$wrap.addClass(this.options.wrapCssClass),this.$wrap.addClass("swapbox-wrapper btn-group"),this.$wrap.insertAfter(a(this.element))},b.prototype.buildList=function(){var b;b=this,this.$list=a("<ul></ul>"),this.$list.attr("role","menu"),this.$list.addClass(this.options.listCssClass),this.$list.addClass("swapbox-list dropdown-menu"),this.$list.appendTo(this.$wrap)},b.prototype.buildItems=function(){var b,c;c=this,b=a(this.element),a.each(this.original_items,function(b,d){var e,f,g;return g="",f="",g="function"===a.type(c.options.itemPrepend)?c.options.itemPrepend(d):c.options.itemPrepend,f="function"===a.type(c.options.itemAppend)?c.options.itemAppend(d):c.options.itemAppend,e=a("<li><a href='#'>"+g+d.label+f+"</a></li>"),e.attr("data-value",d.value),e.on("click",function(a){c.selectOption(d),a.preventDefault()}),e.appendTo(c.$list)})},b.prototype.selectOption=function(b){var c,d,e,f,g,h;f=this,c=a(this.element),h="",g="",h="function"===a.type(f.options.triggerPrepend)?f.options.triggerPrepend(b):f.options.triggerPrepend,g="function"===a.type(f.options.triggerAppend)?f.options.triggerAppend(b):f.options.triggerAppend,this.$trigger.html(""+h+this.$list.find("[data-value='"+b.value+"'] > a").html()+g),this.removeItem(b.value),c.val(b.value),e={relatedTarget:f.$wrap[0]},b.value!==this.selected_item_value&&f.$el.trigger(d=a.Event("change.bs.swapbox",e)),this.selected_item_value=b.value},b.prototype.removeItem=function(a){var b;b=this,this.$list.children().removeClass("hide").end(),this.$list.find("[data-value='"+a+"']").addClass("hide")},b.prototype.buildTrigger=function(){var b,c,d,e,f;f=this,this.$trigger=c=a("<button></button>"),c.addClass(this.options.triggerCssClass),c.addClass("swapbox-toggle btn btn-default dropdown-toggle"),c.attr("data-toggle","dropdown"),b=a(this.element).children().filter(":selected"),d=this.splitOption(b),this.selectOption(d),c.prependTo(this.$wrap),a(this.element).hide(),e={relatedTarget:f.$wrap[0]},this.$wrap.on("show.bs.dropdown",function(b){return f.$el.trigger(b=a.Event("show.bs.swapbox",e))}),this.$wrap.on("shown.bs.dropdown",function(b){return f.$el.trigger(b=a.Event("shown.bs.swapbox",e))}),this.$wrap.on("hide.bs.dropdown",function(b){return f.$el.trigger(b=a.Event("hide.bs.swapbox",e))}),this.$wrap.on("hidden.bs.dropdown",function(b){return f.$el.trigger(b=a.Event("hidden.bs.swapbox",e))})},b.prototype.splitOption=function(a){var b;return b={label:a.text()||"",value:a.attr("value")||a.text()||"",$option:a}},b.prototype.retrieveItems=function(){var b,c;c=this,this.original_items=[],b=this.selected_item_value="",a(this.element).find("option").each(function(){var d,e;return d=a(this),e=c.splitOption(d),d.prop("selected")&&(b=e.value),c.original_items.push(e)})},b}(),a.fn[d]=function(c){return this.each(function(){return a.data(this,"plugin_"+d)?void 0:a.data(this,"plugin_"+d,new b(this,c))})}}(jQuery)}).call(this);